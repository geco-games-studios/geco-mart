{% extends 'base.html' %}
{% load static %}

{% block title %}Geco Mart - Your Products{% endblock %}

{% block content %}
<section class="py-12">
    <div class="container mx-auto px-4">
        <h1 class="text-3xl font-bold mb-8">Your Shopping Cart</h1>
        
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Cart Items -->
            <div class="lg:w-2/3">
                <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                    <div class="p-6">
                        <div class="flex justify-between items-center pb-4 border-b">
                            <h2 class="text-xl font-semibold">Cart Items (3)</h2>
                            <button class="text-gray-500 hover:text-primary">
                                <i class="fas fa-trash-alt mr-1"></i> Clear Cart
                            </button>
                        </div>
                        
                        <!-- Cart Item 1 -->
                        <div class="py-6 border-b">
                            <div class="flex flex-col sm:flex-row">
                                <div class="sm:w-24 mb-4 sm:mb-0">
                                    <img src="https://placehold.co/100x100?text=Product+1" alt="Product 1" class="w-full h-auto rounded">
                                </div>
                                <div class="flex-1 sm:ml-6">
                                    <div class="flex flex-col sm:flex-row sm:justify-between">
                                        <div>
                                            <h3 class="font-semibold text-lg mb-1">Premium Wireless Headphones</h3>
                                            <p class="text-gray-600 text-sm mb-2">Color: Black</p>
                                            <p class="text-primary font-bold">$129.99</p>
                                        </div>
                                        <div class="mt-4 sm:mt-0">
                                            <div class="flex items-center mb-4">
                                                <button class="bg-gray-200 px-3 py-1 rounded-l">-</button>
                                                <input type="text" value="1" class="w-12 text-center border-t border-b py-1">
                                                <button class="bg-gray-200 px-3 py-1 rounded-r">+</button>
                                            </div>
                                            <button class="text-gray-500 hover:text-primary text-sm">
                                                <i class="fas fa-trash-alt mr-1"></i> Remove
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cart Item 2 -->
                        <div class="py-6 border-b">
                            <div class="flex flex-col sm:flex-row">
                                <div class="sm:w-24 mb-4 sm:mb-0">
                                    <img src="https://placehold.co/100x100?text=Product+2" alt="Product 2" class="w-full h-auto rounded">
                                </div>
                                <div class="flex-1 sm:ml-6">
                                    <div class="flex flex-col sm:flex-row sm:justify-between">
                                        <div>
                                            <h3 class="font-semibold text-lg mb-1">Portable Bluetooth Speaker</h3>
                                            <p class="text-gray-600 text-sm mb-2">Color: Blue</p>
                                            <p class="text-primary font-bold">$69.99</p>
                                        </div>
                                        <div class="mt-4 sm:mt-0">
                                            <div class="flex items-center mb-4">
                                                <button class="bg-gray-200 px-3 py-1 rounded-l">-</button>
                                                <input type="text" value="1" class="w-12 text-center border-t border-b py-1">
                                                <button class="bg-gray-200 px-3 py-1 rounded-r">+</button>
                                            </div>
                                            <button class="text-gray-500 hover:text-primary text-sm">
                                                <i class="fas fa-trash-alt mr-1"></i> Remove
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cart Item 3 -->
                        <div class="py-6">
                            <div class="flex flex-col sm:flex-row">
                                <div class="sm:w-24 mb-4 sm:mb-0">
                                    <img src="https://placehold.co/100x100?text=Product+3" alt="Product 3" class="w-full h-auto rounded">
                                </div>
                                <div class="flex-1 sm:ml-6">
                                    <div class="flex flex-col sm:flex-row sm:justify-between">
                                        <div>
                                            <h3 class="font-semibold text-lg mb-1">Wireless Earbuds with Charging Case</h3>
                                            <p class="text-gray-600 text-sm mb-2">Color: White</p>
                                            <p class="text-primary font-bold">$89.99</p>
                                        </div>
                                        <div class="mt-4 sm:mt-0">
                                            <div class="flex items-center mb-4">
                                                <button class="bg-gray-200 px-3 py-1 rounded-l">-</button>
                                                <input type="text" value="1" class="w-12 text-center border-t border-b py-1">
                                                <button class="bg-gray-200 px-3 py-1 rounded-r">+</button>
                                            </div>
                                            <button class="text-gray-500 hover:text-primary text-sm">
                                                <i class="fas fa-trash-alt mr-1"></i> Remove
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Continue Shopping -->
                <div class="flex justify-between items-center">
                    <a href="products.html" class="flex items-center text-primary hover:underline">
                        <i class="fas fa-arrow-left mr-2"></i> Continue Shopping
                    </a>
                    <button id="updateCart" class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300 transition">
                        Update Cart
                    </button>
                </div>
            </div>
            
            <!-- Order Summary -->
            <div class="lg:w-1/3">
                <div class="bg-white rounded-lg shadow-md overflow-hidden sticky top-6">
                    <div class="p-6">
                        <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Subtotal</span>
                                <span>$289.97</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Shipping</span>
                                <span>$10.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tax</span>
                                <span>$24.00</span>
                            </div>
                            <div class="border-t pt-3 mt-3">
                                <div class="flex justify-between font-bold">
                                    <span>Total</span>
                                    <span class="text-primary">$323.97</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Coupon Code -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Coupon Code</label>
                            <div class="flex">
                                <input type="text" placeholder="Enter coupon code" class="flex-1 px-4 py-2 border rounded-l focus:outline-none focus:ring-2 focus:ring-primary">
                                <button class="bg-primary text-white px-4 py-2 rounded-r hover:bg-green-700 transition">Apply</button>
                            </div>
                        </div>
                        
                        <!-- Checkout Button -->
                        <a href="checkout.html" class="block bg-primary text-white text-center px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition w-full">
                            Proceed to Checkout
                        </a>
                        
                        <!-- Payment Methods -->
                        <div class="mt-6 text-center">
                            <p class="text-sm text-gray-600 mb-2">We Accept</p>
                            <div class="flex justify-center space-x-2">
                                <i class="fab fa-cc-visa text-2xl text-blue-700"></i>
                                <i class="fab fa-cc-mastercard text-2xl text-red-500"></i>
                                <i class="fab fa-cc-amex text-2xl text-blue-500"></i>
                                <i class="fab fa-cc-paypal text-2xl text-blue-800"></i>
                                <i class="fab fa-cc-apple-pay text-2xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts%} 
<script>
    // Mobile menu toggle
    document.getElementById('menuToggle').addEventListener('click', function() {
        const mobileMenu = document.getElementById('mobileMenu');
        mobileMenu.classList.toggle('hidden');
    });

    // Quantity buttons
    const minusBtns = document.querySelectorAll('.rounded-l');
    const plusBtns = document.querySelectorAll('.rounded-r');
    const quantityInputs = document.querySelectorAll('.w-12');
    
    minusBtns.forEach((btn, index) => {
        btn.addEventListener('click', function() {
            let value = parseInt(quantityInputs[index].value);
            if (value > 1) {
                quantityInputs[index].value = value - 1;
            }
        });
    });
    
    plusBtns.forEach((btn, index) => {
        btn.addEventListener('click', function() {
            let value = parseInt(quantityInputs[index].value);
            quantityInputs[index].value = value + 1;
        });
    });

    // Remove item buttons
    const removeButtons = document.querySelectorAll('.text-gray-500.hover\\:text-primary.text-sm');
    removeButtons.forEach(button => {
        button.addEventListener('click', function() {
            const cartItem = this.closest('.py-6');
            cartItem.remove();
            
            // Update cart count
            const cartCount = document.querySelector('.fa-shopping-cart + span + span');
            let currentCount = parseInt(cartCount.textContent);
            cartCount.textContent = currentCount - 1;
            
            // Show notification
            showNotification('Item removed from cart!');
            
            // Update cart items count in title
            const cartItemsTitle = document.querySelector('.text-xl.font-semibold');
            const remainingItems = document.querySelectorAll('.py-6').length;
            cartItemsTitle.textContent = `Cart Items (${remainingItems})`;
            
            // If no items left, show empty cart message
            if (remainingItems === 0) {
                const cartItems = document.querySelector('.lg\\:w-2\\/3');
                cartItems.innerHTML = `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6 p-6 text-center">
                        <i class="fas fa-shopping-cart text-gray-300 text-5xl mb-4"></i>
                        <h2 class="text-xl font-semibold mb-2">Your cart is empty</h2>
                        <p class="text-gray-600 mb-6">Looks like you haven't added any items to your cart yet.</p>
                        <a href="products.html" class="bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition">
                            Start Shopping
                        </a>
                    </div>
                `;
            }
        });
    });

    // Update cart button
    document.getElementById('updateCart').addEventListener('click', function() {
        showNotification('Cart updated successfully!');
    });

    // Notification function
    function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg transition-opacity duration-300';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 300);
        }, 3000);
    }
</script>
{% endblock scripts%}